(function(a){function f(c,f){var d,g="",b="";d=a(".level",c);var e=a('input[type="radio"]',c),h=a("[data-path]",c);if(f==="allow"){d.removeClass("deny").addClass("allow");e.filter('[value="allow"]').prop("checked","checked").focus();d=h.data("path").substr(1).split("/");for(e=0;e<d.length-1;e++)g+="/"+d[e],b+=',[data-path="'+g+'"]';b=a(b);a(".level",b).removeClass("deny").addClass("allow");a('input[type="radio"]',b).filter('[value="allow"]').prop("checked","checked")}else d.removeClass("allow").addClass("deny"),
e.filter('[value="deny"]').prop("checked","checked").focus(),b=a('[data-path^="'+h.data("path")+'/"]'),a(".level",b).removeClass("allow").addClass("deny"),a('input[type="radio"]',b).filter('[value="deny"]').prop("checked","checked")}function i(){f(a(this).parents(".element"),this.value)}function j(){var c=a(this);c.hasClass("allow")?f(c.parents(".element"),"deny"):f(c.parents(".element"),"allow")}a(function(){a('input[type="radio"]').live("change",i);a(".level").live("dblclick",j)})})(jQuery);
