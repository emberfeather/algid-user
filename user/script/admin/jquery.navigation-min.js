(function(a){function f(b,f){var d,h="",c="";d=a(".level",b);var e=a('input[type="radio"]',b),g=a("[data-path]",b);if(f==="allow"){d.removeClass("deny").addClass("allow");e.filter('[value="allow"]').prop("checked","checked").focus();d=g.data("path").substr(1).split("/");for(e=0;e<d.length-1;e++)h+="/"+d[e],c+=',[data-path="'+h+'"]';c=a(c);a(".level",c).removeClass("deny").addClass("allow");a('input[type="radio"]',c).filter('[value="allow"]').prop("checked","checked");c=a('[data-path^="'+g.data("path")+
'/"]');a(".level",c).removeClass("deny").addClass("allow");a('input[type="radio"]',c).filter('[value="allow"]').prop("checked","checked")}else d.removeClass("allow").addClass("deny"),e.filter('[value="deny"]').prop("checked","checked").focus(),c=a('[data-path^="'+g.data("path")+'/"]'),a(".level",c).removeClass("allow").addClass("deny"),a('input[type="radio"]',c).filter('[value="deny"]').prop("checked","checked")}function i(){f(a(this).parents(".element"),this.value)}function j(){var b=a(this);b.hasClass("allow")?
f(b.parents(".element"),"deny"):f(b.parents(".element"),"allow")}a(function(){a('input[type="radio"]').live("change",i);a(".level").live("dblclick",j);a(".level.deny").each(function(){var b=a(this).parents("[data-path]"),b=a('[data-path^="'+b.data("path")+'/"]');a(".level",b).removeClass("allow").addClass("deny");a('input[type="radio"]',b).filter('[value="deny"]').prop("checked","checked")})})})(jQuery);
